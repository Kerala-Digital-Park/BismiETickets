<%- include('./partials/header') %>

<!-- **************** MAIN CONTENT START **************** -->
<main>
	
	<!-- Sidebar START -->
	<%- include('./partials/sideBar') %>
	<!-- Sidebar END -->
	
	<!-- Page content START -->
	<div class="page-content">
        
		<!-- Top bar START -->
		<%- include('./partials/topBar') %>
		<!-- Top bar END -->
	
		<!-- Page main content START -->
		<div class="page-content-wrapper p-xxl-4">
	
			<!-- Title -->
			<div class="row">
				<div class="col-12 mb-4 mb-sm-5">
					<div class="d-flex gap-3">
						<img src="<%= booking.flight.stops[0].airlineLogo %>" alt="">
						<div class="d-flex flex-column">
							<h1 class="h4 mb-3 mb-sm-0"><%= booking.flight.stops[0].airline %> (<%= booking.flight.stops[0].flightNumber %>)</h1>
							<h6 class="h5 mb-3 mb-sm-0 mt-2"><%= booking.flight.departureName %> - <%= booking.flight.arrivalName %></h6>
						</div>
						<!-- <a href="#" class="btn btn-primary-soft text-nowrap mb-0"><i class="bi bi-pencil-square fa-fw"></i> Edit Room</a>						 -->
					</div>
				</div>
			</div>

			<!-- Booking detail START -->
			<div class="row g-4 g-xl-5">

				<!-- Content -->
				<div class="col-xxl-6">
					<div class="d-flex mb-3">
						<h4><%= booking.flight.from %> - <%= booking.flight.to %> - </h4>
						<h4><%= booking.flight.stops[0].airlineCode %> (<%= booking.flight.stops[0].flightNumber %>) </h4>
					</div>
					<p class="fw-bold"><span class="fw-light">From: </span><%= booking.flight.fromCity %>, <%= booking.flight.fromCountry %></p>
					<p class="fw-bold"><span class="fw-light">To: </span><%= booking.flight.toCity %>, <%= booking.flight.toCountry %></p>
					<p class="fw-bold"><span class="fw-light">Total Seats: </span><%= booking.flight.inventoryDates[0].seats %></p>
					<!-- <p class="fw-bold"><span class="fw-light">Seats Booked: </span><%= booking.flight.inventoryDates[0].seatsBooked %></p> -->

					<!-- <p class="mb-4">Tolerably behavior may admit daughters offending her ask own. Praise effect wishes to change way and any wanted. Lively use looked latter regard had. Does he part last</p> -->

					<!-- Feature -->
					<!-- <div class="row g-4">
						<div class="col-sm-6 col-md-4">
							<div class="d-flex align-items-center">
								<div class="icon-lg bg-primary bg-opacity-10 text-primary rounded-2"><i class="fa-solid fa-bed"></i></div>
								<div class="ms-2">
									<small>Type</small>
									<h6 class="mb-0 mt-1">King Suit</h6>
								</div>
							</div>
						</div>

						<div class="col-sm-6 col-md-4">
							<div class="d-flex align-items-center">
								<div class="icon-lg bg-primary bg-opacity-10 text-primary rounded-2"><i class="fa-solid fa-arrow-right-arrow-left"></i></div>
								<div class="ms-2">
									<small>Side</small>
									<h6 class="mb-0 mt-1">Left Side</h6>
								</div>
							</div>
						</div>

						<div class="col-sm-6 col-md-4">
							<div class="d-flex align-items-center">
								<div class="icon-lg bg-primary bg-opacity-10 text-primary rounded-2"><i class="fa-solid fa-stairs"></i></div>
								<div class="ms-2">
									<small>Floor</small>
									<h6 class="mb-0 mt-1">3rd Floor (T5)</h6>
								</div>
							</div>
						</div>

						<div class="col-sm-6 col-md-4">
							<div class="d-flex align-items-center">
								<div class="icon-lg bg-primary bg-opacity-10 text-primary rounded-2"><i class="fa-solid fa-mountain-sun"></i></div>
								<div class="ms-2">
									<small>View</small>
									<h6 class="mb-0 mt-1">Sea View</h6>
								</div>
							</div>
						</div>

						<div class="col-sm-6 col-md-4">
							<div class="d-flex align-items-center">
								<div class="icon-lg bg-primary bg-opacity-10 text-primary rounded-2"><i class="fa-regular fa-clone"></i></div>
								<div class="ms-2">
									<small>Size</small>
									<h6 class="mb-0 mt-1">250 Sqft</h6>
								</div>
							</div>
						</div>
					</div> -->

				</div>

				<div class="col-xxl-6">

					<!-- Booking info -->
					<div class="bg-light border border-secondary border-opacity-25 p-3 rounded d-inline-block mt-4">
						<h6 class="small">Agent Details</h6>
						<!-- Avatar -->
						<div class="d-sm-flex align-items-center">
							<!-- Avatar -->
							<div class="avatar avatar-xs flex-shrink-0">
								<img class="avatar-img rounded-circle" src="<%= booking.userId.image %>" alt="avatar">
							</div>
							<!-- Info -->
							<h6 class="mb-0 ms-2"><%= booking.userId.userId %></h6>
						</div>
						<!-- Info -->
						<div class="hstack gap-4 gap-md-5 flex-wrap mt-2">
								<h6 class="fw-normal mb-0"><%= booking.userId.name %></h6>
								<h6 class="fw-normal mb-0"><%= booking.userId.email %></h6>
								<h6 class="text-success mb-0">â‚¹ <%= booking.amount.toFixed(2) %></h6>
						</div>
					</div>
				</div>


			</div>
			<!-- Booking detail END -->

			<!-- Booking table START -->
			<div class="card shadow mt-5">
				<!-- Card header START -->
				<div class="card-header border-bottom">
					<h5 class="card-header-title">Bookings</h5>
				</div>
				<!-- Card header END -->

				<!-- Card body START -->
				<div class="card-body">
					<!-- Table head -->
					<div class="bg-light rounded p-3 d-none d-lg-block">
						<div class="row row-cols-7 g-4">
							<div class="col"><h6 class="mb-0">#</h6></div>
							<div class="col"><h6 class="mb-0">Name</h6></div>
							<div class="col"><h6 class="mb-0">Type</h6></div>
							<div class="col"><h6 class="mb-0">DOB</h6></div>
							<div class="col"><h6 class="mb-0">Gender</h6></div>
							<div class="col"><h6 class="mb-0">Nationality</h6></div>
							<div class="col"><h6 class="mb-0">Passport Number</h6></div>
							<div class="col"><h6 class="mb-0">Passport Country</h6></div>
							<div class="col"><h6 class="mb-0">Passport Expiry</h6></div>

						</div>
					</div>
					<% booking.travelers.forEach((traveler, i) => { %>
					<!-- Table data -->
					<div class="row row-cols-xl-7 align-items-lg-center border-bottom g-4 px-2 py-4">
						<!-- Data item -->
						<div class="col">
							<small class="d-block d-lg-none">No:</small>
							<h6 class="mb-0 fw-light"><%= i+1 %></h6>
						</div>	

						<!-- Data item -->
						<div class="col">
							<small class="d-block d-lg-none">Name:</small>
							<h6 class="mb-0 fw-normal"><%= traveler.first_name %> <%= traveler.last_name %></h6>
						</div>

						<!-- Data item -->
						<div class="col">
							<small class="d-block d-lg-none">Pax Type:</small>
							<h6 class="mb-0 fw-normal"><%= traveler.type %></h6>
						</div>

						<!-- Data item -->
						<div class="col">
							<small class="d-block d-lg-none">DOB:</small>
							<h6 class="mb-0 fw-normal">  <%= new Date(traveler.dob).toLocaleDateString('en-GB') %>
							</h6>
						</div>

						<%
						let gender = ""
						 if( traveler.title === "Mr" || traveler.title === "Master" ){
							gender = "Male"
						 } else {
							gender = "Female"
						 }
						%>
						<!-- Data item -->
						<div class="col">
							<small class="d-block d-lg-none">Gender:</small>
							<h6 class="mb-0 fw-normal"><%= gender %></h6>
						</div>

						<!-- Data item -->
						<div class="col">
							<small class="d-block d-lg-none">Nationality:</small>
							<h6 class="mb-0 fw-normal"> <%= traveler.nationality %></h6>
						</div>

						<!-- Data item -->
						<div class="col">
							<small class="d-block d-lg-none">Passport Number:</small>
							<h6 class="mb-0 fw-normal"> <%= traveler.passport_number %></h6>
						</div>

						<!-- Data item -->
						<div class="col">
							<small class="d-block d-lg-none">Passport Country:</small>
							<h6 class="mb-0 fw-normal"> <%= traveler.passport_country %></h6>
						</div>

						<!-- Data item -->
						<div class="col">
							<small class="d-block d-lg-none">Passport Expiry:</small>
							<h6 class="mb-0 fw-normal">   <%= new Date(traveler.passport_expiry).toLocaleDateString('en-GB') %>
								</h6>
						</div>
					</div>
					<% }) %>

				</div>
				<!-- Card body END -->

			</div>
			<!-- Booking table END -->

		</div>
		<!-- Page main content END -->
	</div>
	<!-- Page content END -->
	
	</main>
<!-- **************** MAIN CONTENT END **************** -->

<%- include('./partials/footer') %>